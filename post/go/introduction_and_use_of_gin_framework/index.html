<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Gin框架介绍及使用 - Daemon365</title><link rel=icon href=/imgs/favicon.ico><link rel=manifest href=/manifest.json><meta name=theme-color content="#007aff"><meta name=mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="default"><meta name=apple-mobile-web-app-title content="Daemon365"><meta name=description content='Gin框架介绍

基于httprouter开发的Web框架。
中文文档，齐全。
简单易用的轻量级框架。

Gin框架安装
go get -u github.com/gin-gonic/gin
实例:
package main
import (
	"fmt" …'><meta name=keywords content="go,gin"><meta name=author content="daemon365"><meta property="og:type" content="article"><meta property="og:url" content="https://daemon365.dev/post/go/introduction_and_use_of_gin_framework/"><meta property="og:title" content="Gin框架介绍及使用 - Daemon365"><meta property="og:description" content='Gin框架介绍

基于httprouter开发的Web框架。
中文文档，齐全。
简单易用的轻量级框架。

Gin框架安装
go get -u github.com/gin-gonic/gin
实例:
package main
import (
	"fmt" …'><meta property="og:image" content="https://daemon365.dev/imgs/avatar.svg"><meta property="og:locale" content="en"><meta property="og:site_name" content="Daemon365"><meta property="article:published_time" content="2019-06-30T00:00:00+08:00"><meta property="article:modified_time" content="2019-06-30T00:00:00+08:00"><meta property="article:author" content="daemon365"><meta property="article:section" content="go"><meta property="article:tag" content="go"><meta property="article:tag" content="gin"><meta name=twitter:card content="summary_large_image"><meta name=twitter:url content="https://daemon365.dev/post/go/introduction_and_use_of_gin_framework/"><meta name=twitter:title content="Gin框架介绍及使用 - Daemon365"><meta name=twitter:description content='Gin框架介绍

基于httprouter开发的Web框架。
中文文档，齐全。
简单易用的轻量级框架。

Gin框架安装
go get -u github.com/gin-gonic/gin
实例:
package main
import (
	"fmt" …'><meta name=twitter:image content="https://daemon365.dev/imgs/avatar.svg"><link rel=canonical href=https://daemon365.dev/post/go/introduction_and_use_of_gin_framework/><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Gin框架介绍及使用","description":"\u003ch2 id=\u0022gin框架介绍\u0022\u003eGin框架介绍\u003c\/h2\u003e\n\u003cul\u003e\n\u003cli\u003e基于\u003ca href=\u0022https:\/\/github.com\/julienschmidt\/httprouter\u0022\u003ehttprouter\u003c\/a\u003e开发的Web框架。\u003c\/li\u003e\n\u003cli\u003e\u003ca href=\u0022https:\/\/gin-gonic.com\/zh-cn\/docs\/\u0022\u003e中文文档\u003c\/a\u003e，齐全。\u003c\/li\u003e\n\u003cli\u003e简单易用的轻量级框架。\u003c\/li\u003e\n\u003c\/ul\u003e\n\u003ch2 id=\u0022gin框架安装\u0022\u003eGin框架安装\u003c\/h2\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cpre tabindex=\u00220\u0022 style=\u0022color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\u0022\u003e\u003ccode class=\u0022language-bash\u0022 data-lang=\u0022bash\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003ego get -u github.com\/gin-gonic\/gin\n\u003c\/span\u003e\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/div\u003e\u003cp\u003e\u003cstrong\u003e实例:\u003c\/strong\u003e\u003c\/p\u003e\n\u003cdiv class=\u0022highlight\u0022\u003e\u003cpre tabindex=\u00220\u0022 style=\u0022color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\u0022\u003e\u003ccode class=\u0022language-go\u0022 data-lang=\u0022go\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003epackage\u003c\/span\u003e \u003cspan style=\u0022color:#75af00\u0022\u003emain\u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\u003cspan style=\u0022color:#f92672\u0022\u003eimport\u003c\/span\u003e \u003cspan style=\u0022color:#111\u0022\u003e(\u003c\/span\u003e\n\u003c\/span\u003e\u003c\/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e\t\u003cspan style=\u0022color:#d88200\u0022\u003e\u0026#34;fmt\u0026#34; …\u003c\/span\u003e\u003c\/span\u003e\u003c\/span\u003e\u003c\/span\u003e\u003c\/span\u003e\u003c\/span\u003e\u003c\/span\u003e\u003c\/code\u003e\u003c\/pre\u003e\u003c\/div\u003e","datePublished":"2019-06-30T00:00:00\u002b08:00","dateModified":"2019-06-30T00:00:00\u002b08:00","author":{"@type":"Person","name":"daemon365"},"publisher":{"@type":"Organization","name":"Daemon365","logo":{"@type":"ImageObject","url":"https:\/\/daemon365.dev\/imgs\/favicon.ico"}},"mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/daemon365.dev\/post\/go\/introduction_and_use_of_gin_framework\/"},"inLanguage":"en"}</script><meta name=robots content="index, follow"><meta name=googlebot content="index, follow"><link rel=stylesheet href=/css/components/variables.css><link rel=stylesheet href=/css/components/base.css><link rel=stylesheet href=/css/components/layout.css><link rel=stylesheet href=/css/main.css><link rel=stylesheet href=/css/components/search.css><link rel=stylesheet href=/css/components/toc.css><link rel=stylesheet href=/css/components/image-preview.css><link rel=stylesheet href=/css/components/reading-progress.css><style>:root{font-family:-apple-system,BlinkMacSystemFont,segoe ui,Roboto,helvetica neue,Arial,sans-serif}</style></head><body><div class=reading-progress-bar></div><header class=site-header><div class=container><div class=header-content><div class=site-branding><a href=/ class=site-logo><span class=site-title>Daemon365</span></a></div><nav class=site-nav><ul class=nav-menu><li><a href=/><svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
首页</a></li><li><a href=/about><svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>
关于</a></li><li><a href=/archives><svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>
归档</a></li><li><a href=/categories><svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg>
分类</a></li><li><a href=/tags><svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
标签</a></li><li><button class=search-trigger aria-label=Search>
<svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
搜索</button></li></ul></nav></div></div></header><main class=main-content><div class=post-container><div class=container><article class=post-content><header class=post-header><h1 class=post-title>Gin框架介绍及使用</h1><div class=post-meta><time datetime=2019-06-30><svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
2019-06-30
</time><a href=/categories/go class=category-link><svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg>
go
</a><span class=reading-time><svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
6 min read
</span><span class=word-count><svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
1071 words</span></div><div class=post-tags><a href=/tags/go class=tag><svg class="icon" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
go
</a><a href=/tags/gin class=tag><svg class="icon" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
gin</a></div></header><div class=post-body><h2 id=gin框架介绍>Gin框架介绍</h2><ul><li>基于<a href=https://github.com/julienschmidt/httprouter>httprouter</a>开发的Web框架。</li><li><a href=https://gin-gonic.com/zh-cn/docs/>中文文档</a>，齐全。</li><li>简单易用的轻量级框架。</li></ul><h2 id=gin框架安装>Gin框架安装</h2><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>go get -u github.com/gin-gonic/gin
</span></span></code></pre></div><p><strong>实例:</strong></p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#75af00>main</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#111>(</span>
</span></span><span style=display:flex><span>	<span style=color:#d88200>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#d88200>&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span style=display:flex><span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Default</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 创建一个默认的路由引擎</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 也可以用gin.New() gin.Default()多用了日志和panic的recover中间件</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/helloworld&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>JSON</span><span style=color:#111>(</span><span style=color:#ae81ff>200</span><span style=color:#111>,</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>H</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>			<span style=color:#75715e>// c.JSON：返回JSON格式的数据</span>
</span></span><span style=display:flex><span>			<span style=color:#d88200>&#34;msg&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;Hello world!&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>		<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>Run</span><span style=color:#111>(</span><span style=color:#d88200>&#34;127.0.0.1:8001&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 启动HTTP服务，默认在127.0.0.1:8001启动服务</span>
</span></span><span style=display:flex><span>	<span style=color:#00a8c8>if</span> <span style=color:#75af00>err</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Println</span><span style=color:#111>(</span><span style=color:#d88200>&#34;run gin field&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>		<span style=color:#00a8c8>return</span>
</span></span><span style=display:flex><span>	<span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><p><img src=/images/a78c08f7-e35f-41f2-bc49-9388ef405408.png alt></p><h2 id=restful-api>RESTful API</h2><p>REST与技术无关，代表的是一种软件架构风格，REST是Representational State Transfer的简称，中文翻译为“表征状态转移”或“表现层状态转化”。</p><p>简单来说，REST的含义就是客户端与Web服务器之间进行交互的时候，使用HTTP协议中的4个请求方法代表不同的动作。</p><ul><li>GET用来获取资源</li><li>POST用来新建资源</li><li>PUT用来更新资源</li><li>DELETE用来删除资源。</li></ul><p>只要API程序遵循了REST风格，那就可以称其为RESTful API。目前在前后端分离的架构中，前后端基本都是通过RESTful API来进行交互。</p><p>例如，我们现在要编写一个管理书籍的系统，我们可以查询对一本书进行查询、创建、更新和删除等操作，我们在编写程序的时候就要设计客户端浏览器与我们Web服务端交互的方式和路径。按照经验我们通常会设计成如下模式：</p><table><thead><tr><th>请求方法</th><th>URL</th><th>含义</th></tr></thead><tbody><tr><td>GET</td><td>/book</td><td>查询书籍信息</td></tr><tr><td>POST</td><td>/create_book</td><td>创建书籍记录</td></tr><tr><td>POST</td><td>/update_book</td><td>更新书籍信息</td></tr><tr><td>POST</td><td>/delete_book</td><td>删除书籍信息</td></tr></tbody></table><p>同样的需求我们按照RESTful API设计如下：</p><table><thead><tr><th>请求方法</th><th>URL</th><th>含义</th></tr></thead><tbody><tr><td>GET</td><td>/book</td><td>查询书籍信息</td></tr><tr><td>POST</td><td>/book</td><td>创建书籍记录</td></tr><tr><td>PUT</td><td>/book</td><td>更新书籍信息</td></tr><tr><td>DELETE</td><td>/book</td><td>删除书籍信息</td></tr></tbody></table><p>Gin框架支持开发RESTful API的开发。</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Default</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/book&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>JSON</span><span style=color:#111>(</span><span style=color:#ae81ff>200</span><span style=color:#111>,</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>H</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>			<span style=color:#d88200>&#34;message&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;GET&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>		<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>POST</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/book&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>JSON</span><span style=color:#111>(</span><span style=color:#ae81ff>200</span><span style=color:#111>,</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>H</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>			<span style=color:#d88200>&#34;message&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;POST&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>		<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>PUT</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/book&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>JSON</span><span style=color:#111>(</span><span style=color:#ae81ff>200</span><span style=color:#111>,</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>H</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>			<span style=color:#d88200>&#34;message&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;PUT&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>		<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>DELETE</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/book&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>JSON</span><span style=color:#111>(</span><span style=color:#ae81ff>200</span><span style=color:#111>,</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>H</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>			<span style=color:#d88200>&#34;message&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;DELETE&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>		<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#111>})</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><p>开发RESTful API的时候我们通常使用<a href=https://www.getpostman.com/>Postman</a>来作为客户端的测试工具。</p><h2 id=gin渲染>Gin渲染</h2><h3 id=html渲染>HTML渲染</h3><p>我们首先定义一个存放模板文件的templates文件夹，然后在其内部按照业务分别定义一个posts文件夹和一个users文件夹。posts/index.html文件的内容如下：</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#111>{{</span><span style=color:#75af00>define</span> <span style=color:#d88200>&#34;posts/index.html&#34;</span><span style=color:#111>}}</span>
</span></span><span style=display:flex><span>    <span style=color:#75af00>posts</span><span style=color:#f92672>/</span><span style=color:#75af00>index</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{{.</span><span style=color:#75af00>title</span><span style=color:#111>}}</span>
</span></span><span style=display:flex><span><span style=color:#111>{{</span><span style=color:#75af00>end</span><span style=color:#111>}}</span>
</span></span></code></pre></div><p>users/index.html文件的内容如下：</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#111>{{</span><span style=color:#75af00>define</span> <span style=color:#d88200>&#34;users/index.html&#34;</span><span style=color:#111>}}</span>
</span></span><span style=display:flex><span>    <span style=color:#75af00>users</span><span style=color:#f92672>/</span><span style=color:#75af00>index</span>
</span></span><span style=display:flex><span>    <span style=color:#111>{{.</span><span style=color:#75af00>title</span><span style=color:#111>}}</span>
</span></span><span style=display:flex><span><span style=color:#111>{{</span><span style=color:#75af00>end</span><span style=color:#111>}}</span>
</span></span></code></pre></div><p>Gin框架中使用LoadHTMLGlob()或者LoadHTMLFiles()方法进行HTML模板渲染。</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Default</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>LoadHTMLGlob</span><span style=color:#111>(</span><span style=color:#d88200>&#34;templates/**/*&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>//r.LoadHTMLFiles(&#34;templates/posts/index.html&#34;, &#34;templates/users/index.html&#34;)</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/posts/index&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>HTML</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusOK</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;posts/index.html&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>H</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>			<span style=color:#d88200>&#34;title&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;posts/index&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>		<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;users/index&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>HTML</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusOK</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;users/index.html&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>H</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>			<span style=color:#d88200>&#34;title&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;users/index&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>		<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>Run</span><span style=color:#111>(</span><span style=color:#d88200>&#34;:8080&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><h3 id=静态文件处理>静态文件处理</h3><p>当我们渲染的HTML文件中引用了静态文件时，我们只需要按照以下方式在渲染页面前调用gin.Static方法即可。</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Default</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>Static</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/static&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;./static&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>LoadHTMLGlob</span><span style=color:#111>(</span><span style=color:#d88200>&#34;templates/**/*&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>   <span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>Run</span><span style=color:#111>(</span><span style=color:#d88200>&#34;:8080&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><h3 id=补充文件路径处理>补充文件路径处理</h3><p>关于模板文件和静态文件的路径，我们需要根据公司/项目的要求进行设置。可以使用下面的函数获取当前执行程序的路径。</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#00a8c8>func</span> <span style=color:#75af00>getCurrentPath</span><span style=color:#111>()</span> <span style=color:#00a8c8>string</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#00a8c8>if</span> <span style=color:#75af00>ex</span><span style=color:#111>,</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>os</span><span style=color:#111>.</span><span style=color:#75af00>Executable</span><span style=color:#111>();</span> <span style=color:#75af00>err</span> <span style=color:#f92672>==</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#00a8c8>return</span> <span style=color:#75af00>filepath</span><span style=color:#111>.</span><span style=color:#75af00>Dir</span><span style=color:#111>(</span><span style=color:#75af00>ex</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>	<span style=color:#111>}</span>
</span></span><span style=display:flex><span>	<span style=color:#00a8c8>return</span> <span style=color:#d88200>&#34;./&#34;</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><h3 id=json渲染>JSON渲染</h3><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Default</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// gin.H 是map[string]interface{}的缩写</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/someJSON&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// 方式一：自己拼接JSON</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>JSON</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusOK</span><span style=color:#111>,</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>H</span><span style=color:#111>{</span><span style=color:#d88200>&#34;message&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;Hello world!&#34;</span><span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/moreJSON&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// 方法二：使用结构体</span>
</span></span><span style=display:flex><span>		<span style=color:#00a8c8>var</span> <span style=color:#75af00>msg</span> <span style=color:#00a8c8>struct</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>			<span style=color:#75af00>Name</span>    <span style=color:#00a8c8>string</span> <span style=color:#d88200>`json:&#34;user&#34;`</span>
</span></span><span style=display:flex><span>			<span style=color:#75af00>Message</span> <span style=color:#00a8c8>string</span>
</span></span><span style=display:flex><span>			<span style=color:#75af00>Age</span>     <span style=color:#00a8c8>int</span>
</span></span><span style=display:flex><span>		<span style=color:#111>}</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>msg</span><span style=color:#111>.</span><span style=color:#75af00>Name</span> <span style=color:#111>=</span> <span style=color:#d88200>&#34;zhy&#34;</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>msg</span><span style=color:#111>.</span><span style=color:#75af00>Message</span> <span style=color:#111>=</span> <span style=color:#d88200>&#34;Hello world!&#34;</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>msg</span><span style=color:#111>.</span><span style=color:#75af00>Age</span> <span style=color:#111>=</span> <span style=color:#ae81ff>18</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>JSON</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusOK</span><span style=color:#111>,</span> <span style=color:#75af00>msg</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>	<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>Run</span><span style=color:#111>(</span><span style=color:#d88200>&#34;:8080&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><h3 id=xml渲染>XML渲染</h3><p>注意需要使用具名的结构体类型。</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Default</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// gin.H 是map[string]interface{}的缩写</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/someXML&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// 方式一：自己拼接JSON</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>XML</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusOK</span><span style=color:#111>,</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>H</span><span style=color:#111>{</span><span style=color:#d88200>&#34;message&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;Hello world!&#34;</span><span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/moreXML&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// 方法二：使用结构体</span>
</span></span><span style=display:flex><span>		<span style=color:#00a8c8>type</span> <span style=color:#75af00>MessageRecord</span> <span style=color:#00a8c8>struct</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>			<span style=color:#75af00>Name</span>    <span style=color:#00a8c8>string</span>
</span></span><span style=display:flex><span>			<span style=color:#75af00>Message</span> <span style=color:#00a8c8>string</span>
</span></span><span style=display:flex><span>			<span style=color:#75af00>Age</span>     <span style=color:#00a8c8>int</span>
</span></span><span style=display:flex><span>		<span style=color:#111>}</span>
</span></span><span style=display:flex><span>		<span style=color:#00a8c8>var</span> <span style=color:#75af00>msg</span> <span style=color:#75af00>MessageRecord</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>msg</span><span style=color:#111>.</span><span style=color:#75af00>Name</span> <span style=color:#111>=</span> <span style=color:#d88200>&#34;小王子&#34;</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>msg</span><span style=color:#111>.</span><span style=color:#75af00>Message</span> <span style=color:#111>=</span> <span style=color:#d88200>&#34;Hello world!&#34;</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>msg</span><span style=color:#111>.</span><span style=color:#75af00>Age</span> <span style=color:#111>=</span> <span style=color:#ae81ff>18</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>XML</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusOK</span><span style=color:#111>,</span> <span style=color:#75af00>msg</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>	<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>Run</span><span style=color:#111>(</span><span style=color:#d88200>&#34;:8080&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><h3 id=ymal渲染>YMAL渲染</h3><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/someYAML&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>YAML</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusOK</span><span style=color:#111>,</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>H</span><span style=color:#111>{</span><span style=color:#d88200>&#34;message&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;ok&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;status&#34;</span><span style=color:#111>:</span> <span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusOK</span><span style=color:#111>})</span>
</span></span><span style=display:flex><span><span style=color:#111>})</span>
</span></span></code></pre></div><h3 id=protobuf渲染>protobuf渲染</h3><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-protobuf data-lang=protobuf><span style=display:flex><span><span style=color:#75715e>// protobuf文件
</span></span></span><span style=display:flex><span><span style=color:#111>syntax</span> <span style=color:#f92672>=</span> <span style=color:#d88200>&#34;proto3&#34;</span><span style=color:#111>;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#111>models</span><span style=color:#111>;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#00a8c8>message</span> <span style=color:#75af00>hello</span> <span style=color:#111>{</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span>    <span style=color:#00a8c8>string</span> <span style=color:#111>content</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span><span style=color:#111>;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#111>}</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#75af00>main</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#111>(</span>
</span></span><span style=display:flex><span>	<span style=color:#d88200>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#d88200>&#34;test/models&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#d88200>&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span style=display:flex><span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Default</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/hello&#34;</span><span style=color:#111>,</span><span style=color:#00a8c8>func</span> <span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span>  <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>res</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#75af00>models</span><span style=color:#111>.</span><span style=color:#75af00>Hello</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>			<span style=color:#75af00>Content</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;你好&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>		<span style=color:#111>}</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>ProtoBuf</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusOK</span><span style=color:#111>,</span><span style=color:#75af00>res</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>	<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>_</span> <span style=color:#111>=</span> <span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>Run</span><span style=color:#111>(</span><span style=color:#d88200>&#34;127.0.0.1:8001&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><h2 id=获取参数>获取参数</h2><h3 id=获取querystring参数>获取querystring参数</h3><p>querystring指的是URL中?后面携带的参数，例如：/user?username=赵海宇&amp;address=地球一角。</p><ol><li>c.DefaultQuery有默认值 如果没有传去默认值</li><li>c.Query没有默认值 如果没传 为空</li></ol><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#75af00>main</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#111>(</span>
</span></span><span style=display:flex><span>	<span style=color:#d88200>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#d88200>&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span style=display:flex><span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Default</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/user&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>username</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>DefaultQuery</span><span style=color:#111>(</span><span style=color:#d88200>&#34;username&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;zhy&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>address</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>Query</span><span style=color:#111>(</span><span style=color:#d88200>&#34;address&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>JSON</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusOK</span><span style=color:#111>,</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>H</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>			<span style=color:#d88200>&#34;username&#34;</span><span style=color:#111>:</span> <span style=color:#75af00>username</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>			<span style=color:#d88200>&#34;address&#34;</span><span style=color:#111>:</span>  <span style=color:#75af00>address</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>		<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>_</span> <span style=color:#111>=</span> <span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>Run</span><span style=color:#111>(</span><span style=color:#d88200>&#34;127.0.0.1:8001&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><h3 id=获取form参数>获取form参数</h3><p>请求的数据通过form表单来提交，例如向/user发送一个POST请求，获取请求数据的方式如下：c.PostForm</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#75af00>main</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#111>(</span>
</span></span><span style=display:flex><span>	<span style=color:#d88200>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#d88200>&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span style=display:flex><span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Default</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>POST</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/user&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>username</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>PostForm</span><span style=color:#111>(</span><span style=color:#d88200>&#34;username&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>address</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>PostForm</span><span style=color:#111>(</span><span style=color:#d88200>&#34;address&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>JSON</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusOK</span><span style=color:#111>,</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>H</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>			<span style=color:#d88200>&#34;username&#34;</span><span style=color:#111>:</span> <span style=color:#75af00>username</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>			<span style=color:#d88200>&#34;address&#34;</span><span style=color:#111>:</span>  <span style=color:#75af00>address</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>		<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>_</span> <span style=color:#111>=</span> <span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>Run</span><span style=color:#111>(</span><span style=color:#d88200>&#34;127.0.0.1:8001&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><h3 id=获取path参数>获取path参数</h3><p>请求的参数通过URL路径传递，例如：/user/zhaohaiyu/地球一角/路由:/user/:username/:address方法:c.Param</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#75af00>main</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#111>(</span>
</span></span><span style=display:flex><span>	<span style=color:#d88200>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#d88200>&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span style=display:flex><span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Default</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/user/:username/:address&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>username</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>Param</span><span style=color:#111>(</span><span style=color:#d88200>&#34;username&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>address</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>Param</span><span style=color:#111>(</span><span style=color:#d88200>&#34;address&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>JSON</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusOK</span><span style=color:#111>,</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>H</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>			<span style=color:#d88200>&#34;username&#34;</span><span style=color:#111>:</span> <span style=color:#75af00>username</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>			<span style=color:#d88200>&#34;address&#34;</span><span style=color:#111>:</span>  <span style=color:#75af00>address</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>		<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>_</span> <span style=color:#111>=</span> <span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>Run</span><span style=color:#111>(</span><span style=color:#d88200>&#34;127.0.0.1:8001&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><h3 id=参数绑定>参数绑定</h3><p>为了能够更方便的获取请求相关参数，提高开发效率，我们可以基于请求的content-type识别请求数据类型并利用反射机制自动提取请求中querystring、form表单、JSON、XML等参数到结构体中。</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#75af00>main</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#111>(</span>
</span></span><span style=display:flex><span>	<span style=color:#d88200>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#d88200>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#d88200>&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span style=display:flex><span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Binding from JSON</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>type</span> <span style=color:#75af00>Login</span> <span style=color:#00a8c8>struct</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>User</span>     <span style=color:#00a8c8>string</span> <span style=color:#d88200>`form:&#34;user&#34; json:&#34;user&#34; binding:&#34;required&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>Password</span> <span style=color:#00a8c8>string</span> <span style=color:#d88200>`form:&#34;password&#34; json:&#34;password&#34; binding:&#34;required&#34;`</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Default</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 绑定JSON的示例 ({&#34;user&#34;: &#34;root&#34;, &#34;password&#34;: &#34;123&#34;})</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>POST</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/loginJSON&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#00a8c8>var</span> <span style=color:#75af00>login</span> <span style=color:#75af00>Login</span>
</span></span><span style=display:flex><span>		<span style=color:#00a8c8>if</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>ShouldBindJSON</span><span style=color:#111>(</span><span style=color:#f92672>&amp;</span><span style=color:#75af00>login</span><span style=color:#111>);</span> <span style=color:#75af00>err</span> <span style=color:#f92672>==</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>			<span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Printf</span><span style=color:#111>(</span><span style=color:#d88200>&#34;login info:%#v\n&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>login</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>			<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>JSON</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusOK</span><span style=color:#111>,</span> <span style=color:#75af00>login</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>		<span style=color:#111>}</span> <span style=color:#00a8c8>else</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>			<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>JSON</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusBadRequest</span><span style=color:#111>,</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>H</span><span style=color:#111>{</span><span style=color:#d88200>&#34;error&#34;</span><span style=color:#111>:</span> <span style=color:#75af00>err</span><span style=color:#111>.</span><span style=color:#75af00>Error</span><span style=color:#111>()})</span>
</span></span><span style=display:flex><span>		<span style=color:#111>}</span>
</span></span><span style=display:flex><span>	<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 绑定form表单示例 (user=root&amp;password=123)</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>POST</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/loginForm&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#00a8c8>var</span> <span style=color:#75af00>login</span> <span style=color:#75af00>Login</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// ShouldBind()会根据请求的Content-Type自行选择绑定器</span>
</span></span><span style=display:flex><span>		<span style=color:#00a8c8>if</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>ShouldBind</span><span style=color:#111>(</span><span style=color:#f92672>&amp;</span><span style=color:#75af00>login</span><span style=color:#111>);</span> <span style=color:#75af00>err</span> <span style=color:#f92672>==</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>			<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>JSON</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusOK</span><span style=color:#111>,</span> <span style=color:#75af00>login</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>		<span style=color:#111>}</span> <span style=color:#00a8c8>else</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>			<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>JSON</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusBadRequest</span><span style=color:#111>,</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>H</span><span style=color:#111>{</span><span style=color:#d88200>&#34;error&#34;</span><span style=color:#111>:</span> <span style=color:#75af00>err</span><span style=color:#111>.</span><span style=color:#75af00>Error</span><span style=color:#111>()})</span>
</span></span><span style=display:flex><span>		<span style=color:#111>}</span>
</span></span><span style=display:flex><span>	<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 绑定querystring示例 (user=root&amp;password=123)</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/loginForm&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#00a8c8>var</span> <span style=color:#75af00>login</span> <span style=color:#75af00>Login</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// ShouldBind()会根据请求的Content-Type自行选择绑定器</span>
</span></span><span style=display:flex><span>		<span style=color:#00a8c8>if</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>ShouldBind</span><span style=color:#111>(</span><span style=color:#f92672>&amp;</span><span style=color:#75af00>login</span><span style=color:#111>);</span> <span style=color:#75af00>err</span> <span style=color:#f92672>==</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>			<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>JSON</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusOK</span><span style=color:#111>,</span> <span style=color:#75af00>login</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>		<span style=color:#111>}</span> <span style=color:#00a8c8>else</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>			<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>JSON</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusBadRequest</span><span style=color:#111>,</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>H</span><span style=color:#111>{</span><span style=color:#d88200>&#34;error&#34;</span><span style=color:#111>:</span> <span style=color:#75af00>err</span><span style=color:#111>.</span><span style=color:#75af00>Error</span><span style=color:#111>()})</span>
</span></span><span style=display:flex><span>		<span style=color:#111>}</span>
</span></span><span style=display:flex><span>	<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>_</span> <span style=color:#111>=</span> <span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>Run</span><span style=color:#111>(</span><span style=color:#d88200>&#34;127.0.0.1:8001&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><h2 id=文件上传>文件上传</h2><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>router</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Default</span><span style=color:#111>()</span> <span style=color:#75715e>// 处理multipart forms提交文件时默认的内存限制是32 MiB</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 可以通过下面的方式修改</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// router.MaxMultipartMemory = 8 &lt;&lt; 20 // 8 MiB</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>router</span><span style=color:#111>.</span><span style=color:#75af00>POST</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/upload&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// 单个文件</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>file</span><span style=color:#111>,</span> <span style=color:#75af00>err</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>FormFile</span><span style=color:#111>(</span><span style=color:#d88200>&#34;file&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>		<span style=color:#00a8c8>if</span> <span style=color:#75af00>err</span> <span style=color:#f92672>!=</span> <span style=color:#00a8c8>nil</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>			<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>JSON</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusInternalServerError</span><span style=color:#111>,</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>H</span><span style=color:#111>{</span><span style=color:#d88200>&#34;message&#34;</span><span style=color:#111>:</span> <span style=color:#75af00>err</span><span style=color:#111>.</span><span style=color:#75af00>Error</span><span style=color:#111>()})</span>
</span></span><span style=display:flex><span>			<span style=color:#00a8c8>return</span>
</span></span><span style=display:flex><span>		<span style=color:#111>}</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>log</span><span style=color:#111>.</span><span style=color:#75af00>Println</span><span style=color:#111>(</span><span style=color:#75af00>file</span><span style=color:#111>.</span><span style=color:#75af00>Filename</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>dst</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Sprintf</span><span style=color:#111>(</span><span style=color:#d88200>&#34;C:/tmp/%s&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>file</span><span style=color:#111>.</span><span style=color:#75af00>Filename</span><span style=color:#111>)</span> <span style=color:#75715e>// 上传文件到指定的目录</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>SaveUploadedFile</span><span style=color:#111>(</span><span style=color:#75af00>file</span><span style=color:#111>,</span> <span style=color:#75af00>dst</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>JSON</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusOK</span><span style=color:#111>,</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>H</span><span style=color:#111>{</span><span style=color:#d88200>&#34;message&#34;</span><span style=color:#111>:</span> <span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Sprintf</span><span style=color:#111>(</span><span style=color:#d88200>&#34;&#39;%s&#39; uploaded!&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>file</span><span style=color:#111>.</span><span style=color:#75af00>Filename</span><span style=color:#111>)})</span>
</span></span><span style=display:flex><span>	<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>router</span><span style=color:#111>.</span><span style=color:#75af00>Run</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><h3 id=多个文件上传>多个文件上传</h3><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>router</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Default</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 处理multipart forms提交文件时默认的内存限制是32 MiB</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 可以通过下面的方式修改</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// router.MaxMultipartMemory = 8 &lt;&lt; 20  // 8 MiB</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>router</span><span style=color:#111>.</span><span style=color:#75af00>POST</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/upload&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// Multipart form</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>form</span><span style=color:#111>,</span> <span style=color:#75af00>_</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>MultipartForm</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>files</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>form</span><span style=color:#111>.</span><span style=color:#75af00>File</span><span style=color:#111>[</span><span style=color:#d88200>&#34;file&#34;</span><span style=color:#111>]</span>
</span></span><span style=display:flex><span>		<span style=color:#00a8c8>for</span> <span style=color:#75af00>index</span><span style=color:#111>,</span> <span style=color:#75af00>file</span> <span style=color:#f92672>:=</span> <span style=color:#00a8c8>range</span> <span style=color:#75af00>files</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>			<span style=color:#75af00>log</span><span style=color:#111>.</span><span style=color:#75af00>Println</span><span style=color:#111>(</span><span style=color:#75af00>file</span><span style=color:#111>.</span><span style=color:#75af00>Filename</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>			<span style=color:#75af00>dst</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Sprintf</span><span style=color:#111>(</span><span style=color:#d88200>&#34;C:/tmp/%s_%d&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>file</span><span style=color:#111>.</span><span style=color:#75af00>Filename</span><span style=color:#111>,</span> <span style=color:#75af00>index</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>			<span style=color:#75715e>// 上传文件到指定的目录</span>
</span></span><span style=display:flex><span>			<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>SaveUploadedFile</span><span style=color:#111>(</span><span style=color:#75af00>file</span><span style=color:#111>,</span> <span style=color:#75af00>dst</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>		<span style=color:#111>}</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>JSON</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusOK</span><span style=color:#111>,</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>H</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>			<span style=color:#d88200>&#34;message&#34;</span><span style=color:#111>:</span> <span style=color:#75af00>fmt</span><span style=color:#111>.</span><span style=color:#75af00>Sprintf</span><span style=color:#111>(</span><span style=color:#d88200>&#34;%d files uploaded!&#34;</span><span style=color:#111>,</span> <span style=color:#111>len</span><span style=color:#111>(</span><span style=color:#75af00>files</span><span style=color:#111>)),</span>
</span></span><span style=display:flex><span>		<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>router</span><span style=color:#111>.</span><span style=color:#75af00>Run</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><h2 id=gin中间件>Gin中间件</h2><p>Gin框架允许开发者在处理请求的过程中，加入用户自己的钩子（Hook）函数。这个钩子函数就叫中间件，中间件适合处理一些公共的业务逻辑，比如登录校验、日志打印、耗时统计等。</p><p>Gin中的中间件必须是一个gin.HandlerFunc类型。例如我们像下面的代码一样定义一个中间件。</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// StatCost 是一个统计耗时请求耗时的中间件</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>func</span> <span style=color:#75af00>StatCost</span><span style=color:#111>()</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>HandlerFunc</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#00a8c8>return</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>start</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>time</span><span style=color:#111>.</span><span style=color:#75af00>Now</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>Set</span><span style=color:#111>(</span><span style=color:#d88200>&#34;name&#34;</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;小王子&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// 执行其他中间件</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>Next</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// 计算耗时</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>cost</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>time</span><span style=color:#111>.</span><span style=color:#75af00>S</span><span style=color:#f92672>***</span><span style=color:#75af00>art</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>log</span><span style=color:#111>.</span><span style=color:#75af00>Println</span><span style=color:#111>(</span><span style=color:#75af00>cost</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>	<span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><p>然后注册中间件的时候，可以在全局注册。</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 新建一个没有任何默认中间件的路由</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>New</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 注册一个全局中间件</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>Use</span><span style=color:#111>(</span><span style=color:#75af00>StatCost</span><span style=color:#111>())</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/test&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>name</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>MustGet</span><span style=color:#111>(</span><span style=color:#d88200>&#34;name&#34;</span><span style=color:#111>).(</span><span style=color:#00a8c8>string</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>log</span><span style=color:#111>.</span><span style=color:#75af00>Println</span><span style=color:#111>(</span><span style=color:#75af00>name</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>JSON</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusOK</span><span style=color:#111>,</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>H</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>			<span style=color:#d88200>&#34;message&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;Hello world!&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>		<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>Run</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><p>也可以给某个路由单独注册中间件。</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// 给/test2路由单独注册中间件（可注册多个）</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/test2&#34;</span><span style=color:#111>,</span> <span style=color:#75af00>StatCost</span><span style=color:#111>(),</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>name</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>MustGet</span><span style=color:#111>(</span><span style=color:#d88200>&#34;name&#34;</span><span style=color:#111>).(</span><span style=color:#00a8c8>string</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>log</span><span style=color:#111>.</span><span style=color:#75af00>Println</span><span style=color:#111>(</span><span style=color:#75af00>name</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>JSON</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusOK</span><span style=color:#111>,</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>H</span><span style=color:#111>{</span>
</span></span><span style=display:flex><span>			<span style=color:#d88200>&#34;message&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;Hello world!&#34;</span><span style=color:#111>,</span>
</span></span><span style=display:flex><span>		<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#111>})</span>
</span></span></code></pre></div><h3 id=重定向>重定向</h3><h4 id=http重定向>HTTP重定向</h4><p>HTTP 重定向很容易。 内部、外部重定向均支持。</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/test&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>Redirect</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusMovedPermanently</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;http://www.google.com/&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#111>})</span>
</span></span></code></pre></div><h4 id=路由重定向>路由重定向</h4><p>路由重定向，使用HandleContext：</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/test&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 指定重定向的URL</span>
</span></span><span style=display:flex><span>    <span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>Request</span><span style=color:#111>.</span><span style=color:#75af00>URL</span><span style=color:#111>.</span><span style=color:#75af00>Path</span> <span style=color:#111>=</span> <span style=color:#d88200>&#34;/test2&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>HandleContext</span><span style=color:#111>(</span><span style=color:#75af00>c</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#111>})</span>
</span></span><span style=display:flex><span><span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/test2&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>JSON</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusOK</span><span style=color:#111>,</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>H</span><span style=color:#111>{</span><span style=color:#d88200>&#34;hello&#34;</span><span style=color:#111>:</span> <span style=color:#d88200>&#34;world&#34;</span><span style=color:#111>})</span>
</span></span><span style=display:flex><span><span style=color:#111>})</span>
</span></span></code></pre></div><h2 id=gin路由>Gin路由</h2><h3 id=普通路由>普通路由</h3><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/index&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span><span style=color:#f92672>...</span><span style=color:#111>})</span>
</span></span><span style=display:flex><span><span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/login&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span><span style=color:#f92672>...</span><span style=color:#111>})</span>
</span></span><span style=display:flex><span><span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>POST</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/login&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span><span style=color:#f92672>...</span><span style=color:#111>})</span>
</span></span></code></pre></div><p>此外，还有一个可以匹配所有请求方法的Any方法如下：</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>Any</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/test&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span><span style=color:#f92672>...</span><span style=color:#111>})</span>
</span></span></code></pre></div><p>为没有配置处理函数的路由添加处理程序。默认情况下它返回404代码。</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>NoRoute</span><span style=color:#111>(</span><span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>HTML</span><span style=color:#111>(</span><span style=color:#75af00>http</span><span style=color:#111>.</span><span style=color:#75af00>StatusNotFound</span><span style=color:#111>,</span> <span style=color:#d88200>&#34;views/404.html&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>nil</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>	<span style=color:#111>})</span>
</span></span></code></pre></div><h3 id=路由组>路由组</h3><p>我们可以将拥有共同URL前缀的路由划分为一个路由组。</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Default</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>userGroup</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>Group</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/user&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>	<span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>userGroup</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/index&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span><span style=color:#f92672>...</span><span style=color:#111>})</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>userGroup</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/login&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span><span style=color:#f92672>...</span><span style=color:#111>})</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>userGroup</span><span style=color:#111>.</span><span style=color:#75af00>POST</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/login&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span><span style=color:#f92672>...</span><span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#111>}</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>shopGroup</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>Group</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/shop&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>	<span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>shopGroup</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/index&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span><span style=color:#f92672>...</span><span style=color:#111>})</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>shopGroup</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/cart&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span><span style=color:#f92672>...</span><span style=color:#111>})</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>shopGroup</span><span style=color:#111>.</span><span style=color:#75af00>POST</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/checkout&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span><span style=color:#f92672>...</span><span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#111>}</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>Run</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><p>通常我们将路由分组用在划分业务逻辑或划分API版本时。</p><h3 id=路由分文件>路由分文件</h3><ol><li>在route中初始化route和切片路由组</li><li>在各个文件写路由</li><li>在main中把路由函数放入函数路由组</li></ol><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// route中go</span>
</span></span><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#75af00>route</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#d88200>&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>type</span> <span style=color:#75af00>Option</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Engine</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>var</span> <span style=color:#75af00>options</span> <span style=color:#111>=</span> <span style=color:#111>[]</span><span style=color:#75af00>Option</span><span style=color:#111>{}</span> <span style=color:#75715e>// 路由函数组</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 注册app的路由配置</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>func</span> <span style=color:#75af00>Include</span><span style=color:#111>(</span><span style=color:#75af00>opts</span> <span style=color:#f92672>...</span><span style=color:#75af00>Option</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>options</span> <span style=color:#111>=</span> <span style=color:#111>append</span><span style=color:#111>(</span><span style=color:#75af00>options</span><span style=color:#111>,</span> <span style=color:#75af00>opts</span><span style=color:#f92672>...</span><span style=color:#111>)</span> <span style=color:#75715e>// 路由函数组添加函数</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 初始化</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>func</span> <span style=color:#75af00>Init</span><span style=color:#111>()</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Engine</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>New</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span>	<span style=color:#00a8c8>for</span> <span style=color:#75af00>_</span><span style=color:#111>,</span> <span style=color:#75af00>function</span> <span style=color:#f92672>:=</span> <span style=color:#00a8c8>range</span> <span style=color:#75af00>options</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>function</span><span style=color:#111>(</span><span style=color:#75af00>r</span><span style=color:#111>)</span> <span style=color:#75715e>// 执行路由函数组中所有函数</span>
</span></span><span style=display:flex><span>	<span style=color:#111>}</span>
</span></span><span style=display:flex><span>	<span style=color:#00a8c8>return</span> <span style=color:#75af00>r</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// shop中的文件</span>
</span></span><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#75af00>shop</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#d88200>&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>func</span> <span style=color:#75af00>Routers</span><span style=color:#111>(</span><span style=color:#75af00>e</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Engine</span><span style=color:#111>)</span> <span style=color:#111>{</span><span style=color:#75715e>// 路由函数</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>e</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/post&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>String</span><span style=color:#111>(</span><span style=color:#ae81ff>200</span><span style=color:#111>,</span><span style=color:#d88200>&#34;psot shop&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>	<span style=color:#111>})</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>e</span><span style=color:#111>.</span><span style=color:#75af00>GET</span><span style=color:#111>(</span><span style=color:#d88200>&#34;/comment&#34;</span><span style=color:#111>,</span> <span style=color:#00a8c8>func</span><span style=color:#111>(</span><span style=color:#75af00>c</span> <span style=color:#f92672>*</span><span style=color:#75af00>gin</span><span style=color:#111>.</span><span style=color:#75af00>Context</span><span style=color:#111>)</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>		<span style=color:#75af00>c</span><span style=color:#111>.</span><span style=color:#75af00>String</span><span style=color:#111>(</span><span style=color:#ae81ff>200</span><span style=color:#111>,</span><span style=color:#d88200>&#34;comment shop&#34;</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>	<span style=color:#111>})</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// main.go</span>
</span></span><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#75af00>main</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#111>(</span>
</span></span><span style=display:flex><span>	<span style=color:#d88200>&#34;test/demo1/route&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#d88200>&#34;test/demo1/shop&#34;</span>
</span></span><span style=display:flex><span><span style=color:#111>)</span>
</span></span><span style=display:flex><span><span style=color:#00a8c8>func</span> <span style=color:#75af00>main</span><span style=color:#111>()</span> <span style=color:#111>{</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>route</span><span style=color:#111>.</span><span style=color:#75af00>Include</span><span style=color:#111>(</span><span style=color:#75af00>shop</span><span style=color:#111>.</span><span style=color:#75af00>Routers</span><span style=color:#111>)</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 初始化路由</span>
</span></span><span style=display:flex><span>	<span style=color:#75af00>r</span> <span style=color:#f92672>:=</span> <span style=color:#75af00>route</span><span style=color:#111>.</span><span style=color:#75af00>Init</span><span style=color:#111>()</span> 
</span></span><span style=display:flex><span>	<span style=color:#75af00>_</span> <span style=color:#111>=</span> <span style=color:#75af00>r</span><span style=color:#111>.</span><span style=color:#75af00>Run</span><span style=color:#111>()</span>
</span></span><span style=display:flex><span><span style=color:#111>}</span>
</span></span></code></pre></div><h3 id=路由原理>路由原理</h3><p>Gin框架中的路由使用的是<a href=https://github.com/julienschmidt/httprouter>httprouter</a>这个库。</p><p>其基本原理就是构造一个路由地址的前缀树。</p><h2 id=参考文章>参考文章</h2><ul><li><a href=https://www.liwenzhou.com/posts/Go/Gin_framework/>https://www.liwenzhou.com/posts/Go/Gin_framework/</a></li></ul></div><footer class=post-footer><div class=post-license><p><strong>Article Title:</strong> Gin框架介绍及使用</p><p><strong>Author:</strong> daemon365</p><p><strong>Permalink:</strong> <a href=https://daemon365.dev/post/go/introduction_and_use_of_gin_framework/>https://daemon365.dev/post/go/introduction_and_use_of_gin_framework/</a></p><p><strong>License:</strong> This article is licensed under
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank rel=noopener>BY-NC-SA</a>. Please cite the source when reposting.</p></div><nav class=post-navigation><a href=/post/go/goalng_package_and_command_tools/ class=nav-prev><svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg><div><span class=nav-label>Previous</span>
<span class=nav-title>goalng包和命令工具</span></div></a><a href=/post/go/golang_reflection/ class=nav-next><div><span class=nav-label>Next</span>
<span class=nav-title>golang 反射</span></div><svg class="icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg></a></nav><div class=post-comments><script src=https://utteranc.es/client.js repo=daemon365/blog issue-term=pathname label=comments theme=preferred-color-scheme crossorigin=anonymous async></script></div></footer></article></div></div><div class=toc-float-button id=tocButton><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5A2.5 2.5.0 016.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5.0 014 19.5v-15A2.5 2.5.0 016.5 2z"/></svg></div><div class=toc-panel id=tocPanel><div class=toc-panel-header><h3 class=toc-panel-title>Table of Contents</h3><button class=toc-panel-close id=tocClose>
<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button></div><nav class=toc-panel-nav id=TableOfContents><nav id=TableOfContents><ul><li><a href=#gin框架介绍>Gin框架介绍</a></li><li><a href=#gin框架安装>Gin框架安装</a></li><li><a href=#restful-api>RESTful API</a></li><li><a href=#gin渲染>Gin渲染</a><ul><li><a href=#html渲染>HTML渲染</a></li><li><a href=#静态文件处理>静态文件处理</a></li><li><a href=#补充文件路径处理>补充文件路径处理</a></li><li><a href=#json渲染>JSON渲染</a></li><li><a href=#xml渲染>XML渲染</a></li><li><a href=#ymal渲染>YMAL渲染</a></li><li><a href=#protobuf渲染>protobuf渲染</a></li></ul></li><li><a href=#获取参数>获取参数</a><ul><li><a href=#获取querystring参数>获取querystring参数</a></li><li><a href=#获取form参数>获取form参数</a></li><li><a href=#获取path参数>获取path参数</a></li><li><a href=#参数绑定>参数绑定</a></li></ul></li><li><a href=#文件上传>文件上传</a><ul><li><a href=#多个文件上传>多个文件上传</a></li></ul></li><li><a href=#gin中间件>Gin中间件</a><ul><li><a href=#重定向>重定向</a><ul><li><a href=#http重定向>HTTP重定向</a></li><li><a href=#路由重定向>路由重定向</a></li></ul></li></ul></li><li><a href=#gin路由>Gin路由</a><ul><li><a href=#普通路由>普通路由</a></li><li><a href=#路由组>路由组</a></li><li><a href=#路由分文件>路由分文件</a></li><li><a href=#路由原理>路由原理</a></li></ul></li><li><a href=#参考文章>参考文章</a></li></ul></nav></nav></div></main><footer class=site-footer><div class=container><div class=footer-content><div class=footer-info><p class=copyright>© 2026 daemon365</p><p class=powered-by>由 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 和 <a href=https://github.com/daemon365/hugo-theme-daemon target=_blank rel=noopener>Daemon</a> 驱动</p></div><div class=social-links><a href=https://github.com/daemon365 target=_blank rel=noopener aria-label=GitHub><svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.374.0.0 5.373.0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931.0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176.0.0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221.0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"/></svg>
</a><a href=mailto:daemon365@foxmail.com aria-label=Email><svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a></div></div></div></footer><div class=search-modal id=searchModal><div class=search-modal-backdrop></div><div class=search-modal-content><div class=search-modal-header><input type=text class=search-input id=searchInput placeholder=搜索文章... autofocus>
<button class=search-close aria-label="Close search">
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button></div><div class=search-results id=searchResults><p class=search-hint>输入 2 个或更多字符开始搜索</p></div></div></div><script src=/js/components/search.js></script><script src=/js/components/toc.js></script><script src=/js/components/scroll-effects.js></script><script src=/js/components/code-copy.js></script><script src=/js/components/lazy-loading.js></script><script src=/js/components/image-preview.js></script><script src=/js/components/back-to-top.js></script><script src=/js/main-new.js></script><script>"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("Service Worker registered:",e.scope)}).catch(e=>{console.log("Service Worker registration failed:",e)})})</script></body></html>