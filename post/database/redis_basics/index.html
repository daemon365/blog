<!doctype html><html lang=zh-CN data-theme=light><head><meta charset=UTF-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.138.0"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/favicon.ico><meta itemprop=name content="redis基础"><meta itemprop=description content="Don't let yourself stop."><meta name=description content="Don't let yourself stop."><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://daemon365.dev/imgs/daemon365.png"><meta itemprop=keywords content="redis"><meta property="og:type" content="article"><meta property="og:title" content="redis基础"><meta property="og:description" content="Don't let yourself stop."><meta property="og:image" content="/imgs/daemon365.png"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://daemon365.dev/post/database/redis_basics/"><meta property="og:site_name" content="Daemon"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="daemon365"><meta property="article:published_time" content="2020-03-20 00:00:00 +0800 +0800"><meta property="article:modified_time" content="2020-03-20 00:00:00 +0800 +0800"><link type=text/css rel=stylesheet href=https://daemon365.dev/3rd/font-awesome/6.6.0/css/all.min.css><link type=text/css rel=stylesheet href=https://daemon365.dev/3rd/animate.css/4.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://daemon365.dev/3rd/viewerjs/1.11.6/viewer.min.css><link rel=stylesheet href=/css/main.min.febc18f19594a8015fedb0ceabc4b316f1314420256d37f4c29ec06f31508ad2.css><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":true,"isHome":false,"isPage":true,"path":"redis_basics","permalink":"https://daemon365.dev/post/database/redis_basics/","title":"redis基础","waline":{"js":[{"alias":"@waline/client","alias_name":"waline","file":"dist/pageview.js","name":"pageview","version":"2.15.8"},{"alias":"@waline/client","alias_name":"waline","file":"dist/comment.js","name":"comment","version":"2.15.8"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.id="LA_COLLECT",e.src="https://sdk.51.la/js-sdk-pro.min.js",e.async="true",e.onload=function(){LA.init({id:"JmAHxEAUVgyS8B1c",ck:"JmAHxEAUVgyS8B1c",autoTrack:!0})},document.head.appendChild(e)})</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>redis基础 - Daemon</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>Daemon</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>Don't let yourself stop.</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section>Home</a></li><li class="menu-item menu-item-about"><a href=/about/ class=hvr-icon-pulse rel=section>About</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section>Archives</a></li><li class="menu-item menu-item-commonweal"><a href=/404.html class=hvr-icon-pulse rel=section>Commonweal</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse">搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#redis介绍>redis介绍</a><ul><li><a href=#redis的安装>redis的安装</a></li></ul></li><li><a href=#redis的命令网站>redis的命令网站</a></li><li><a href=#redis的基本操作>redis的基本操作</a><ul><li><a href=#redis的五大数据类型>redis的五大数据类型</a></li><li><a href=#redis键操作>redis键操作</a></li><li><a href=#字符串string>字符串(String)</a><ul><li><a href=#简介>简介</a></li><li><a href=#常用命令>常用命令</a></li><li><a href=#数据结构>数据结构</a></li></ul></li><li><a href=#列表list>列表(List)</a><ul><li><a href=#简介-1>简介</a></li><li><a href=#常用命令-1>常用命令</a></li><li><a href=#数据结构-1>数据结构</a></li></ul></li><li><a href=#集合set>集合(Set)</a><ul><li><a href=#简介-2>简介</a></li><li><a href=#常用命令-2>常用命令</a></li><li><a href=#数据结构-2>数据结构</a></li></ul></li><li><a href=#哈希hash>哈希(Hash)</a><ul><li><a href=#简介-3>简介</a></li><li><a href=#常用命令-3>常用命令</a></li><li><a href=#数据结构-3>数据结构</a></li></ul></li><li><a href=#有序集合zsetsorted-set>有序集合Zset(sorted set)</a><ul><li><a href=#简介-4>简介</a></li><li><a href=#常用命令-4>常用命令</a></li><li><a href=#数据结构-4>数据结构</a></li></ul></li></ul></li><li><a href=#redis新数据类型>Redis新数据类型</a><ul><li><a href=#bitmaps>Bitmaps</a><ul><li><a href=#简介-5>简介</a></li><li><a href=#命令>命令</a></li><li><a href=#bitmaps与set对比>Bitmaps与set对比</a></li></ul></li><li><a href=#hyperloglog>HyperLogLog</a><ul><li><a href=#简介-6>简介</a></li><li><a href=#命令-1>命令</a></li></ul></li><li><a href=#geospatial>Geospatial</a><ul><li><a href=#简介-7>简介</a></li><li><a href=#命令-2>命令</a></li></ul></li></ul></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=daemon365 src=/imgs/img-lazy-loading.gif data-src=/imgs/daemon365.png><p class=site-author-name itemprop=name>daemon365</p><div class=site-description itemprop=description>Don't let yourself stop.</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>93</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>7</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>52</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/daemon365 title="Github → https://github.com/daemon365" rel=noopener target=_blank><i class="fab fa-github fa-fw"></i>
Github</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=共享知识><img src=/imgs/img-lazy-loading.gif data-src=/imgs/cc/big/by_nc_sa.svg alt=共享知识></a></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://go-kratos.dev title=https://go-kratos.dev target=_blank>kratos</a></li></ul></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-comments class="button goto-comments" title=直达评论><i class="fas fa-comments"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><script type=text/javascript src=//sidecar.gitter.im/dist/sidecar.v1.js async></script><script type=text/javascript>((window.gitter={}).chat={}).options={room:"hugo-next/community"}</script><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://daemon365.dev/post/database/redis_basics/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/daemon365.png"><meta itemprop=name content="daemon365"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="daemon365"><meta itemprop=description content="Don't let yourself stop."></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="redis基础"><meta itemprop=description content="redis介绍

Redis 是完全开源的，遵守 BSD 协议，是一个高性能的 key-value 数据库。
Redis 与其他 key - value 缓存产品有以下三个特点：

Redis支持数据的持久化，可以将内存中的数据保存在磁盘中，重启的时候可以再次加载进行使用。
Redis不仅仅支持简单的key-value类型的数据，同时还提供list，set，zset，hash等数据结构的存储。
Redis支持数据的备份，即master-slave模式的数据备份。

redis的安装

brew install redis(mac)
yum install redis(centos)
apt-get install redis(ubuntu)
redis的命令网站



    Redis 命令参考 — Redis 命令参考 (redisfans.com)
    
    
    
"></span><header class=post-header><h1 class=post-title itemprop="name headline">redis基础</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2020-03-20 00:00:00 +0800 +0800" itemprop="dateCreated datePublished" datetime="2020-03-20 00:00:00 +0800 +0800">2020-03-20
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/database itemprop=url rel=index><span itemprop=name>database</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="fas fa-solid fa-file-word"></i>
</span><span class=post-meta-item-text>字数：</span>
<span>7580</span>
</span><span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="fas fa-solid fa-clock"></i>
</span><span class=post-meta-item-text>阅读：&ap;</span>
<span>16分钟</span>
</span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=busuanzi_value_page_pv data-path=/post/database/redis_basics/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><h2 id=redis介绍>redis介绍
<a class=header-anchor href=#redis%e4%bb%8b%e7%bb%8d></a></h2><p>Redis 是完全开源的，遵守 BSD 协议，是一个高性能的 key-value 数据库。</p><p>Redis 与其他 key - value 缓存产品有以下三个特点：</p><ul><li>Redis支持数据的持久化，可以将内存中的数据保存在磁盘中，重启的时候可以再次加载进行使用。</li><li>Redis不仅仅支持简单的key-value类型的数据，同时还提供list，set，zset，hash等数据结构的存储。</li><li>Redis支持数据的备份，即master-slave模式的数据备份。</li></ul><h3 id=redis的安装>redis的安装
<a class=header-anchor href=#redis%e7%9a%84%e5%ae%89%e8%a3%85></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>brew install redis<span style=color:#f92672>(</span>mac<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>yum install redis<span style=color:#f92672>(</span>centos<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>apt-get install redis<span style=color:#f92672>(</span>ubuntu<span style=color:#f92672>)</span>
</span></span></code></pre></div><h2 id=redis的命令网站>redis的命令网站
<a class=header-anchor href=#redis%e7%9a%84%e5%91%bd%e4%bb%a4%e7%bd%91%e7%ab%99></a></h2><p><a href=http://doc.redisfans.com/ title="Redis 命令参考 — Redis 命令参考 (redisfans.com)" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Redis 命令参考 — Redis 命令参考 (redisfans.com)
<i class="fa fa-external-link-alt"></i></a></p><h2 id=redis的基本操作>redis的基本操作
<a class=header-anchor href=#redis%e7%9a%84%e5%9f%ba%e6%9c%ac%e6%93%8d%e4%bd%9c></a></h2><h3 id=redis的五大数据类型>redis的五大数据类型
<a class=header-anchor href=#redis%e7%9a%84%e4%ba%94%e5%a4%a7%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b></a></h3><p>redis的五大数据类型是: <strong>String(字符串)、Hash(哈希)、List(列表)、Set(集合)、和zset(sorted set:有序集合)</strong></p><h3 id=redis键操作>redis键操作
<a class=header-anchor href=#redis%e9%94%ae%e6%93%8d%e4%bd%9c></a></h3><ul><li><code>keys *</code>查看当前库所有key (匹配：keys *1)</li><li><code>exists key</code>判断某个key是否存在</li><li><code>type key</code> 查看你的key是什么类型</li><li><code>del key</code> 删除指定的key数据</li><li><code>unlink key</code> 根据value选择非阻塞删除 仅将keys从keyspace元数据中删除，真正的删除会在后续异步操作。</li><li><code>expire key 10 </code>10秒钟：为给定的key设置过期时间</li><li><code>ttl key</code> 查看还有多少秒过期，-1表示永不过期，-2表示已过期</li><li><code>select</code>命令切换数据库</li><li><code>dbsize</code>查看当前数据库的key的数量</li><li><code>flushdb</code>清空当前库</li><li><code>flushall</code>通杀全部库</li></ul><h3 id=字符串string>字符串(String)
<a class=header-anchor href=#%e5%ad%97%e7%ac%a6%e4%b8%b2string></a></h3><h4 id=简介>简介
<a class=header-anchor href=#%e7%ae%80%e4%bb%8b></a></h4><p>String是Redis最基本的类型，你可以理解成与Memcached一模一样的类型，一个key对应一个value。</p><p>String类型是二进制安全的。意味着Redis的string可以包含任何数据。比如jpg图片或者序列化的对象。</p><p>String类型是Redis最基本的数据类型，一个Redis中字符串value最多可以是512M</p><h4 id=常用命令>常用命令
<a class=header-anchor href=#%e5%b8%b8%e7%94%a8%e5%91%bd%e4%bb%a4></a></h4><ul><li><code>set &lt;key>&lt;value></code>添加键值对</li><li><code>get &lt;key></code>查询对应键值</li><li><code>append &lt;key>&lt;value></code>将给定的<value> 追加到原值的末尾</li><li><code>strlen &lt;key></code>获得值的长度</li><li><code>setnx &lt;key>&lt;value></code>只有在 key 不存在时 设置 key 的值</li><li><code>incr &lt;key> </code>将 key 中储存的数字值增1 只能对数字值操作，如果为空，新增值为1</li><li><code>decr &lt;key></code> 将 key 中储存的数字值减1 只能对数字值操作，如果为空，新增值为-1</li><li><code>incrby / decrby &lt;key>&lt;步长></code>将 key 中储存的数字值增减。自定义步长。</li></ul><h4 id=数据结构>数据结构
<a class=header-anchor href=#%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84></a></h4><p>String的数据结构为简单动态字符串(Simple Dynamic String,缩写SDS)。是可以修改的字符串，内部结构实现上类似于Java的ArrayList，采用预分配冗余空间的方式来减少内存的频繁分配.</p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/f5606772-f15c-49ef-9c08-6b7f1e6495ea.png alt></p><p>如图中所示，内部为当前字符串实际分配的空间capacity一般要高于实际字符串长度len。当字符串长度小于1M时，扩容都是加倍现有的空间，如果超过1M，扩容时一次只会多扩1M的空间。需要注意的是字符串最大长度为512M。</p><h3 id=列表list>列表(List)
<a class=header-anchor href=#%e5%88%97%e8%a1%a8list></a></h3><h4 id=简介-1>简介
<a class=header-anchor href=#%e7%ae%80%e4%bb%8b-1></a></h4><p>单键多值</p><p>Redis 列表是简单的字符串列表，按照插入顺序排序。你可以添加一个元素到列表的头部（左边）或者尾部（右边）。</p><p>它的底层实际是个双向链表，对两端的操作性能很高，通过索引下标的操作中间的节点性能会较差。</p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/e7492d9c-c6d9-4de0-83b5-fd6482bc3c51.png alt></p><h4 id=常用命令-1>常用命令
<a class=header-anchor href=#%e5%b8%b8%e7%94%a8%e5%91%bd%e4%bb%a4-1></a></h4><ul><li><code>lpush/rpush &lt;key>&lt;value1>&lt;value2>&lt;value3> ....</code> 从左边/右边插入一个或多个值。</li><li><code>lpop/rpop &lt;key></code>从左边/右边吐出一个值。值在键在，值光键亡。</li><li><code>rpoplpush &lt;key1>&lt;key2></code>从<key1>列表右边吐出一个值，插到<key2>列表左边。</li><li><code>lrange &lt;key>&lt;start>&lt;stop></code> 按照索引下标获得元素(从左到右)</li><li><code>lrange mylist 0 -1</code> 0左边第一个，-1右边第一个，（0-1表示获取所有）</li><li><code>lindex &lt;key>&lt;index></code>按照索引下标获得元素(从左到右)</li><li><code>llen &lt;key></code>获得列表长度</li><li><code>linsert &lt;key> before &lt;value>&lt;newvalue></code>在<value>的后面插入<newvalue>插入值</li><li><code>lrem &lt;key>&lt;n>&lt;value></code>从左边删除n个value(从左到右)</li><li><code>lset&lt;key>&lt;index>&lt;value></code>将列表key下标为index的值替换成value</li></ul><h4 id=数据结构-1>数据结构
<a class=header-anchor href=#%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84-1></a></h4><p>List的数据结构为快速链表quickList。</p><p>首先在列表元素较少的情况下会使用一块连续的内存存储，这个结构是ziplist，也即是压缩列表。它将所有的元素紧挨着一起存储，分配的是一块连续的内存。当数据量比较多的时候才会改成quicklist。因为普通的链表需要的附加指针空间太大，会比较浪费空间。比如这个列表里存的只是int类型的数据，结构上还需要两个额外的指针prev和next。</p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/810b0d87-7a3c-416a-87ac-66ad441e8a0a.png alt></p><p>Redis将链表和ziplist结合起来组成了quicklist。也就是将多个ziplist使用双向指针串起来使用。这样既满足了快速的插入删除性能，又不会出现太大的空间冗余。</p><h3 id=集合set>集合(Set)
<a class=header-anchor href=#%e9%9b%86%e5%90%88set></a></h3><h4 id=简介-2>简介
<a class=header-anchor href=#%e7%ae%80%e4%bb%8b-2></a></h4><p>Redis set对外提供的功能与list类似是一个列表的功能，特殊之处在于set是可以****自动排重****的，当你需要存储一个列表数据，又不希望出现重复数据时，set是一个很好的选择，并且set提供了判断某个成员是否在一个set集合内的重要接口，这个也是list所不能提供的。</p><p>Redis的Set是string类型的无序集合。它底层其实是一个value为null的hash表，所以添加，删除，查找的****复杂度都是O(1)****。</p><p>一个算法，随着数据的增加，执行时间的长短，如果是O(1)，数据增加，查找数据的时间不变</p><h4 id=常用命令-2>常用命令
<a class=header-anchor href=#%e5%b8%b8%e7%94%a8%e5%91%bd%e4%bb%a4-2></a></h4><ul><li><code>sadd &lt;key>&lt;value1>&lt;value2> ..... </code>将一个或多个 member 元素加入到集合 key 中，已经存在的 member 元素将被忽略</li><li><code>smembers &lt;key></code>取出该集合的所有值。</li><li><code>sismember &lt;key>&lt;value></code>判断集合<key>是否为含有该<value>值，有1，没有0</li><li><code>scard&lt;key></code>返回该集合的元素个数。</li><li><code>srem &lt;key>&lt;value1>&lt;value2> ....</code> 删除集合中的某个元素。</li><li><code>spop &lt;key></code><em><strong>*随机从该集合中吐出一个值。*</strong></em></li><li><code>srandmember &lt;key>&lt;n></code>随机从该集合中取出n个值。不会从集合中删除 。</li><li><code>smove &lt;source>&lt;destination></code>value把集合中一个值从一个集合移动到另一个集合</li><li><code>sinter &lt;key1>&lt;key2></code>返回两个集合的交集元素。</li><li><code>sunion &lt;key1>&lt;key2></code>返回两个集合的并集元素。</li><li><code>sdiff &lt;key1>&lt;key2></code>返回两个集合的****差集****元素(key1中的，不包含key2中的)</li></ul><h4 id=数据结构-2>数据结构
<a class=header-anchor href=#%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84-2></a></h4><p>Set数据结构是dict字典，字典是用哈希表实现的。
Java中HashSet的内部实现使用的是HashMap，只不过所有的value都指向同一个对象。Redis的set结构也是一样，它的内部也使用hash结构，所有的value都指向同一个内部值。</p><h3 id=哈希hash>哈希(Hash)
<a class=header-anchor href=#%e5%93%88%e5%b8%8chash></a></h3><h4 id=简介-3>简介
<a class=header-anchor href=#%e7%ae%80%e4%bb%8b-3></a></h4><p>Redis hash 是一个键值对集合。</p><p>Redis hash是一个string类型的field和value的映射表，hash特别适合用于存储对象。</p><h4 id=常用命令-3>常用命令
<a class=header-anchor href=#%e5%b8%b8%e7%94%a8%e5%91%bd%e4%bb%a4-3></a></h4><ul><li><code>hset &lt;key>&lt;field>&lt;value></code>给<key>集合中的 <field>键赋值<value></li><li><code>hget &lt;key1>&lt;field></code>从<key1>集合<field>取出 value</li><li><code>hmset &lt;key1>&lt;field1>&lt;value1>&lt;field2>&lt;value2>... </code>批量设置hash的值</li><li><code>hexists&lt;key1>&lt;field></code>查看哈希表 key 中，给定域 field 是否存在。</li><li><code>hkeys &lt;key></code>列出该hash集合的所有field</li><li><code>hvals &lt;key></code>列出该hash集合的所有value</li><li><code>hincrby &lt;key>&lt;field>&lt;increment></code>为哈希表 key 中的域 field 的值加上增量 1 -1</li><li><code>hsetnx &lt;key>&lt;field>&lt;value></code>将哈希表 key 中的域 field 的值设置为 value ，当且仅当域 field 不存在 .</li></ul><h4 id=数据结构-3>数据结构
<a class=header-anchor href=#%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84-3></a></h4><p>Hash类型对应的数据结构是两种：ziplist（压缩列表），hashtable（哈希表）。当field-value长度较短且个数较少时，使用ziplist，否则使用hashtable。</p><h3 id=有序集合zsetsorted-set>有序集合Zset(sorted set)
<a class=header-anchor href=#%e6%9c%89%e5%ba%8f%e9%9b%86%e5%90%88zsetsorted-set></a></h3><h4 id=简介-4>简介
<a class=header-anchor href=#%e7%ae%80%e4%bb%8b-4></a></h4><p>Redis有序集合zset与普通集合set非常相似，是一个没有重复元素的字符串集合。</p><p>不同之处是有序集合的每个成员都关联了一个****评分（score）****,这个评分（score）被用来按照从最低分到最高分的方式排序集合中的成员。集合的成员是唯一的，但是评分可以是重复了 。</p><p>因为元素是有序的, 所以你也可以很快的根据评分（score）或者次序（position）来获取一个范围的元素。</p><p>访问有序集合的中间元素也是非常快的,因此你能够使用有序集合作为一个没有重复成员的智能列表。</p><h4 id=常用命令-4>常用命令
<a class=header-anchor href=#%e5%b8%b8%e7%94%a8%e5%91%bd%e4%bb%a4-4></a></h4><ul><li><code>zadd &lt;key>&lt;score1>&lt;value1>&lt;score2>&lt;value2>… </code>将一个或多个 member 元素及其 score 值加入到有序集 key 当中。</li><li><code>zrange &lt;key>&lt;start>&lt;stop> [WITHSCORES] </code>返回有序集 key 中，下标在<start><stop>之间的元素带WITHSCORES，可以让分数一起和值返回到结果集。</li><li><code>zrangebyscore key minmax [withscores] [limit offset count]</code> 返回有序集 key 中，所有 score 值介于 min 和 max 之间(包括等于 min 或 max )的成员。有序集成员按 score 值递增(从小到大)次序排列。</li><li><code>zrevrangebyscore key maxmin [withscores] [limit offset count] </code>同上，改为从大到小排列。</li><li><code>zincrby &lt;key>&lt;increment>&lt;value></code> 为元素的score加上增量</li><li><code>zrem &lt;key>&lt;value></code>删除该集合下，指定值的元素</li><li><code>zcount &lt;key>&lt;min>&lt;max></code>统计该集合，分数区间内的元素个数</li><li><code>zrank &lt;key>&lt;value></code>返回该值在集合中的排名，从0开始。</li></ul><h4 id=数据结构-4>数据结构
<a class=header-anchor href=#%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84-4></a></h4><p>SortedSet(zset)是Redis提供的一个非常特别的数据结构，一方面它等价于Java的数据结构Map&lt;String, Double>，可以给每一个元素value赋予一个权重score，另一方面它又类似于TreeSet，内部的元素会按照权重score进行排序，可以得到每个元素的名次，还可以通过score的范围来获取元素的列表。</p><p>zset底层使用了两个数据结构</p><ol><li>hash，hash的作用就是关联元素value和权重score，保障元素value的唯一性，可以通过元素value找到相应的score值。</li><li>跳跃表，跳跃表的目的在于给元素value排序，根据score的范围获取元素列表。</li></ol><h2 id=redis新数据类型>Redis新数据类型
<a class=header-anchor href=#redis%e6%96%b0%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b></a></h2><h3 id=bitmaps>Bitmaps
<a class=header-anchor href=#bitmaps></a></h3><h4 id=简介-5>简介
<a class=header-anchor href=#%e7%ae%80%e4%bb%8b-5></a></h4><p>现代计算机用二进制（位） 作为信息的基础单位， 1个字节等于8位， 例如“abc”字符串是由3个字节组成， 但实际在计算机存储时将其用二进制表示， “abc”分别对应的ASCII码分别是97、 98、 99， 对应的二进制分别是01100001、 01100010和01100011，如下图</p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/4ba572ec-0cd0-471d-8321-46012e72f259.png alt></p><p>合理地使用操作位能够有效地提高内存使用率和开发效率。</p><p>Redis提供了Bitmaps这个“数据类型”可以实现对位的操作：</p><ol><li>Bitmaps本身不是一种数据类型， 实际上它就是字符串（key-value） ， 但是它可以对字符串的位进行操作。</li><li>Bitmaps单独提供了一套命令， 所以在Redis中使用Bitmaps和使用字符串的方法不太相同。 可以把Bitmaps想象成一个以位为单位的数组， 数组的每个单元只能存储0和1， 数组的下标在Bitmaps中叫做偏移量。</li></ol><p><img src=/imgs/img-lazy-loading.gif data-src=/images/38fcab8e-c732-4d37-9712-712a307f36d1.png alt></p><h4 id=命令>命令
<a class=header-anchor href=#%e5%91%bd%e4%bb%a4></a></h4><ol><li>setbit</li></ol><p>（1）格式</p><p><code>setbit&lt;key>&lt;offset>&lt;value></code>设置Bitmaps中某个偏移量的值（0或1）</p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/82e8f396-ad55-40db-b4b5-6dc9201c6e33.png alt></p><p>*offset:偏移量从0开始</p><p>（2）实例</p><p>每个独立用户是否访问过网站存放在Bitmaps中， 将访问的用户记做1， 没有访问的用户记做0， 用偏移量作为用户的id。</p><p>设置键的第offset个位的值（从0算起） ， 假设现在有20个用户，userid=1， 6， 11， 15， 19的用户对网站进行了访问， 那么当前Bitmaps初始化结果如图</p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/b881197f-9c5a-44f1-a9ec-2f68364ca122.png alt></p><p>unique:users:20201106代表2020-11-06这天的独立访问用户的Bitmaps</p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/906ce509-1af2-45c6-9238-4ba96f69eef0.png alt></p><p>注：</p><p>很多应用的用户id以一个指定数字（例如10000） 开头， 直接将用户id和Bitmaps的偏移量对应势必会造成一定的浪费， 通常的做法是每次做setbit操作时将用户id减去这个指定数字。</p><p>在第一次初始化Bitmaps时， 假如偏移量非常大， 那么整个初始化过程执行会比较慢， 可能会造成Redis的阻塞。</p><ol start=2><li>getbit</li></ol><p>（1）格式
getbit<key><offset>获取Bitmaps中某个偏移量的值</p><p>获取键的第offset位的值（从0开始算）</p><p>（2）实例
获取id=8的用户是否在2020-11-06这天访问过， 返回0说明没有访问过</p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/7585a845-40ec-4482-8c9f-03e904de86f1.png alt></p><p>注：因为100根本不存在，所以也是返回0</p><ol start=3><li>bitcount</li></ol><p>统计字符串被设置为1的bit数。一般情况下，给定的整个字符串都会被进行计数，通过指定额外的 start 或 end 参数，可以让计数只在特定的位上进行。start 和 end 参数的设置，都可以使用负数值：比如 -1 表示最后一个位，而 -2 表示倒数第二个位，start、end 是指bit组的字节的下标数，二者皆包含。
（1）格式
bitcount<key>[start end] 统计字符串从start字节到end字节比特值为1的数量</p><p>（2）实例
计算2022-11-06这天的独立访问用户数量</p><p>start和end代表起始和结束字节数， 下面操作计算用户id在第1个字节到第3个字节之间的独立访问用户数， 对应的用户id是11， 15， 19。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-fallback data-lang=fallback><span style=display:flex><span>举例： K1 【01000001 01000000  00000000 00100001】，对应【0，1，2，3】
</span></span><span style=display:flex><span>bitcount K1 1 2  ： 统计下标1、2字节组中bit=1的个数，即01000000  00000000
</span></span><span style=display:flex><span>--》bitcount K1 1 2 　　--》1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>bitcount K1 1 3  ： 统计下标1、2字节组中bit=1的个数，即01000000  00000000 00100001
</span></span><span style=display:flex><span>--》bitcount K1 1 3　　--》3
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>bitcount K1 0 -2  ： 统计下标0到下标倒数第2，字节组中bit=1的个数，即01000001  01000000   00000000
</span></span><span style=display:flex><span>--》bitcount K1 0 -2　　--》3
</span></span></code></pre></div><p>注意：redis的setbit设置或清除的是bit位置，而bitcount计算的是byte位置。</p><ol start=4><li>bitop</li></ol><p>(1)格式
bitop and(or/not/xor) <destkey>[key…]</p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/8a7cd908-8bf4-4a7e-8811-9c572487fea9.png alt></p><p>bitop是一个复合操作， 它可以做多个Bitmaps的and（交集） 、 or（并集） 、 not（非） 、 xor（异或） 操作并将结果保存在destkey中。</p><p>(2)实例</p><p>2020-11-04 日访问网站的userid=1,2,5,9。</p><p>setbit unique:users:20201104 1 1</p><p>setbit unique:users:20201104 2 1</p><p>setbit unique:users:20201104 5 1</p><p>setbit unique:users:20201104 9 1</p><p>2020-11-03 日访问网站的userid=0,1,4,9。</p><p>setbit unique:users:20201103 0 1</p><p>setbit unique:users:20201103 1 1</p><p>setbit unique:users:20201103 4 1</p><p>setbit unique:users:20201103 9 1</p><p>计算出两天都访问过网站的用户数量</p><p>bitop and unique:users:and:20201104_03</p><p>unique:users:20201103unique:users:20201104</p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/06377b31-60a0-455e-97c8-7febdf1a07ea.png alt></p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/7ee5ed4d-b2bd-43d4-b7a7-5c26c7562a28.png alt></p><p>计算出任意一天都访问过网站的用户数量（例如月活跃就是类似这种） ， 可以使用or求并集</p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/0a8dfb0f-51f5-4caa-a615-0304b5f4bbf9.png alt></p><h4 id=bitmaps与set对比>Bitmaps与set对比
<a class=header-anchor href=#bitmaps%e4%b8%8eset%e5%af%b9%e6%af%94></a></h4><p>假设网站有1亿用户， 每天独立访问的用户有5千万， 如果每天用集合类型和Bitmaps分别存储活跃用户可以得到表</p><table><thead><tr><th>set和Bitmaps存储一天活跃用户对比</th><th></th><th></th><th></th></tr></thead><tbody><tr><td>数据类型</td><td>每个用户id占用空间</td><td>需要存储的用户量</td><td>全部内存量</td></tr><tr><td>集合类型</td><td>64位</td><td>50000000</td><td>64位*50000000 = 400MB</td></tr><tr><td>Bitmaps</td><td>1位</td><td>100000000</td><td>1位*100000000 = 12.5MB</td></tr></tbody></table><p>很明显， 这种情况下使用Bitmaps能节省很多的内存空间， 尤其是随着时间推移节省的内存还是非常可观的</p><table><thead><tr><th>set和Bitmaps存储独立用户空间对比</th><th></th><th></th><th></th></tr></thead><tbody><tr><td>数据类型</td><td>一天</td><td>一个月</td><td>一年</td></tr><tr><td>集合类型</td><td>400MB</td><td>12GB</td><td>144GB</td></tr><tr><td>Bitmaps</td><td>12.5MB</td><td>375MB</td><td>4.5GB</td></tr></tbody></table><p>但Bitmaps并不是万金油， 假如该网站每天的独立访问用户很少， 例如只有10万（大量的僵尸用户） ， 那么两者的对比如下表所示， 很显然， 这时候使用Bitmaps就不太合适了， 因为基本上大部分位都是0。</p><table><thead><tr><th>set和Bitmaps存储一天活跃用户对比（独立用户比较少）</th><th></th><th></th><th></th></tr></thead><tbody><tr><td>数据类型</td><td>每个userid占用空间</td><td>需要存储的用户量</td><td>全部内存量</td></tr><tr><td>集合类型</td><td>64位</td><td>100000</td><td>64位*100000 = 800KB</td></tr><tr><td>Bitmaps</td><td>1位</td><td>100000000</td><td>1位*100000000 = 12.5MB</td></tr></tbody></table><h3 id=hyperloglog>HyperLogLog
<a class=header-anchor href=#hyperloglog></a></h3><h4 id=简介-6>简介
<a class=header-anchor href=#%e7%ae%80%e4%bb%8b-6></a></h4><p>在工作当中，我们经常会遇到与统计相关的功能需求，比如统计网站PV（PageView页面访问量）,可以使用Redis的incr、incrby轻松实现。
但像UV（UniqueVisitor，独立访客）、独立IP数、搜索记录数等需要去重和计数的问题如何解决？这种求集合中不重复元素个数的问题称为基数问题。
解决基数问题有很多种方案：
（1）数据存储在MySQL表中，使用distinct count计算不重复个数</p><p>（2）使用Redis提供的hash、set、bitmaps等数据结构来处理</p><p>以上的方案结果精确，但随着数据不断增加，导致占用空间越来越大，对于非常大的数据集是不切实际的。</p><p>能否能够降低一定的精度来平衡存储空间？Redis推出了HyperLogLog</p><p>Redis HyperLogLog 是用来做基数统计的算法，HyperLogLog 的优点是，在输入元素的数量或者体积非常非常大时，计算基数所需的空间总是固定的、并且是很小的。</p><p>在 Redis 里面，每个 HyperLogLog 键只需要花费 12 KB 内存，就可以计算接近 2^64 个不同元素的基数。这和计算基数时，元素越多耗费内存就越多的集合形成鲜明对比。</p><p>但是，因为 HyperLogLog 只会根据输入元素来计算基数，而不会储存输入元素本身，所以 HyperLogLog 不能像集合那样，返回输入的各个元素。</p><p>什么是基数?</p><p>比如数据集 {1, 3, 5, 7, 5, 7, 8}， 那么这个数据集的基数集为 {1, 3, 5 ,7, 8}, 基数(不重复元素)为5。 基数估计就是在误差可接受的范围内，快速计算基数。</p><h4 id=命令-1>命令
<a class=header-anchor href=#%e5%91%bd%e4%bb%a4-1></a></h4><p>1、pfadd</p><p>（1）格式</p><p>pfadd <key>&lt; element> [element &mldr;] 添加指定元素到 HyperLogLog 中</p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/62e21699-dc0f-46bd-82cb-029f3222fbc7.png alt></p><p>（2）实例</p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/c2f7d56a-b3f5-4a35-9b22-d974527449b0.png alt></p><p>​ 将所有元素添加到指定HyperLogLog数据结构中。如果执行命令后HLL估计的近似基数发生变化，则返回1，否则返回0。</p><p>2、pfcount</p><p>（1）格式</p><p>pfcount<key> [key &mldr;] 计算HLL的近似基数，可以计算多个HLL，比如用HLL存储每天的UV，计算一周的UV可以使用7天的UV合并计算即可</p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/f809026c-fc64-48fe-be04-706e6cc41f44.png alt></p><p>（2）实例</p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/f5b58b59-9932-4057-bd8f-60432b157770.png alt></p><p>3、pfmerge</p><p>（1）格式</p><p>pfmerge<destkey><sourcekey> [sourcekey &mldr;] 将一个或多个HLL合并后的结果存储在另一个HLL中，比如每月活跃用户可以使用每天的活跃用户来合并计算可得</p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/631183a5-9ff4-48b7-ac89-fbdd7789d129.png alt></p><p>（2）实例</p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/dfd3ee89-78e6-42ce-a229-dc9cefd1cec4.png alt></p><h3 id=geospatial>Geospatial
<a class=header-anchor href=#geospatial></a></h3><h4 id=简介-7>简介
<a class=header-anchor href=#%e7%ae%80%e4%bb%8b-7></a></h4><p>Redis 3.2 中增加了对GEO类型的支持。GEO，Geographic，地理信息的缩写。该类型，就是元素的2维坐标，在地图上就是经纬度。redis基于该类型，提供了经纬度设置，查询，范围查询，距离查询，经纬度Hash等常见操作。</p><h4 id=命令-2>命令
<a class=header-anchor href=#%e5%91%bd%e4%bb%a4-2></a></h4><p>1、geoadd</p><p>（1）格式</p><p>geoadd<key>&lt; longitude><latitude><member> [longitude latitude member&mldr;] 添加地理位置（经度，纬度，名称）</p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/05ef798c-3889-4c03-91d4-90b1f15c9956.png alt></p><p>2）实例</p><p>geoadd china:city 121.47 31.23 shanghai</p><p>geoadd china:city 106.50 29.53 chongqing 114.05 22.52 shenzhen 116.38 39.90 beijing</p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/8ac8b0f3-9cfb-40e5-9cb9-8ef5b49ec1b6.png alt></p><p>两极无法直接添加，一般会下载城市数据，直接通过 Java 程序一次性导入。</p><p>有效的经度从 -180 度到 180 度。有效的纬度从 -85.05112878 度到 85.05112878 度。</p><p>当坐标位置超出指定范围时，该命令将会返回一个错误。</p><p>已经添加的数据，是无法再次往里面添加的。</p><p>2、geopos</p><p>（1）格式</p><p>geopos <key><member>[member&mldr;] 获得指定地区的坐标值</p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/d0233779-9639-4787-8e99-3283ac7e855e.png alt></p><p>（2）实例</p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/71ab3c6c-66ca-4a71-b6d2-f16555a3e548.png alt></p><p>3、geodist</p><p>（1）格式</p><p>geodist<key><member1><member2> [m|km|ft|mi ] 获取两个位置之间的直线距离</p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/ed4cb462-5939-4c09-9392-bd6c6b50dec6.png alt></p><p>（2）实例</p><p>获取两个位置之间的直线距离</p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/c5817ee3-a137-430a-9734-c3a51179382f.png alt></p><p>单位：</p><p>m 表示单位为米[默认值]。</p><p>km 表示单位为千米。</p><p>mi 表示单位为英里。</p><p>ft 表示单位为英尺。</p><p>如果用户没有显式地指定单位参数， 那么 GEODIST 默认使用米作为单位</p><p>4、georadius</p><p>（1）格式</p><p>georadius<key>&lt; longitude><latitude>radius m|km|ft|mi 以给定的经纬度为中心，找出某一半径内的元素</p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/63d0253a-d296-4b59-9b3a-0cda8db7167f.png alt></p><p>经度 纬度 距离 单位</p><p>（2）实例</p><p><img src=/imgs/img-lazy-loading.gif data-src=/images/bd56b575-3eab-442e-aa42-fb8768d47bb1.png alt></p></div><footer class=post-footer><div class=post-tags><a href=/tags/redis>redis</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=post-copyright><img src=/imgs/cc/cc.svg width=75 height=75 align=right alt=共享知识><ul><li class=post-copyright-title><strong>文章标题：</strong>
redis基础</li><li class=post-copyright-author><strong>本文作者： </strong>daemon365</li><li class=post-copyright-link><strong>本文链接：</strong>
<a id=post-cr-link href=https://daemon365.dev/post/database/redis_basics/ title=redis基础>https://daemon365.dev/post/database/redis_basics/</a></li><li class=post-copyright-license><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/database/redis_persistence/ rel=next title=redis持久化><i class="fa fa-chevron-left"></i> redis持久化</a></div><div class="post-nav-prev post-nav-item"><a href=/post/cloud/introduction_to_nginx__usage/ rel=prev title=nginx简介,使用>nginx简介,使用
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div id=comments class=post-comments><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i>
<span>评论交流</span></div></div><div class=comment-wrap><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=utterances-container></div></div></div></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2019 - 2024
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>daemon365</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.138.0 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.6.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div></div></footer><script type=text/javascript src=https://daemon365.dev/3rd/animejs/3.2.2/anime.min.js crossorigin=anonymous defer></script><script type=text/javascript src=https://daemon365.dev/3rd/viewerjs/1.11.6/viewer.min.js crossorigin=anonymous defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"copybtn":true,"darkmode":false,"hostname":"https://daemon365.dev/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lawidget":{"id":"JmAHxEAUVgyS8B1c","js":"https://v6-widget.51.la/v6/laId/quote.js?theme=0\u0026col=true\u0026f=12\u0026display=0,0,0,1,0,1,1,1"},"lazyload":false,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":false,"enable":false,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":false,"plugin":"waline"},"views":{"enable":true,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"utterances":{"cfg":{"issueterm":"pathname","label":"comments","repo":"daemon365/blog","theme":"preferred-color-scheme"},"js":"https://utteranc.es/client.js"},"vendor":{"plugins":"local","router":{"name":"local","type":"modern","url":"https://daemon365.dev/3rd"}},"version":"4.6.3"}</script><script type=text/javascript src=/js/main.min.67947911eede6b08b61e6da911bd723abeb33e549e5f17c600657105589e5d18.js defer></script></body></html>